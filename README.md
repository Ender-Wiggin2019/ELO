# 天梯模式

## 规则简述

* 以一月为赛季基本单位，赛季结束后分数会继承部分分数到下一赛季
* beta版本默认4人局+官方扩全选，其余设置可由玩家协商设置
* c房规则与一般游戏相同，但是当玩家加入房间后需全部坐下方可开始游戏，系统会进行匿名处理
* 比赛过程中每名玩家总限时2小时，每一动限时30分数，如超时会弹出是否放弃游戏选项，根据多数意见评判，如均选择放弃玩家会获得一定补偿分数，超时者失去额外分数作为惩罚。
* 比赛中禁止体退。
* 比赛结束后会根据elo修正各位玩家的分数。
* 网站会有额外界面展示当前天梯前10名玩家。
* 第一赛季积分到达给定数值会获得eros扩展电子版卡牌奖励，赛季结算前十名会获得vip15天奖励，第一名会获得一张卡牌设计权。

## 功能实现

### db设计

* 在用户db中额外增加elo这一字段。
* 增加一个新db用于存放玩家elo排名（方便在网页界面展示）

### 创建游戏界面设计

* 在游戏选项中新增`天梯模式`按钮。
* 点击后会`disable()`部分游戏选项。
* 创建无需输入玩家名称和颜色，会弹出一个界面等待玩家加入。
* 玩家点击`sit down`坐下并进入一个随机id的游戏界面。

### ELO算法设计

* 初始分数设为1500，即`user.elo = 1500`。
* 一局游戏后，按照4人elo分数修正，调用`user.modifyELO()` 方法
* 将修改结果写入db（user和elo两个database）

